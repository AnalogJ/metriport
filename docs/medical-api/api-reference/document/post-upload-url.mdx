---
title: "Upload Document"
description: "Returns a presigned URL to use for a medical document upload to our servers."
api: "POST /medical/v1/document/upload-url"
---

## Overview:

This endpoint enables you to upload your patients' medical documents with specified context to our servers, making them available to other HIEs.

## Getting the Presigned URL

To use this endpoint, you will need to follow these steps:

1. Create a prelimiary version of a Partial\<[DocumentReference](/medical-api/fhir/resources/documentreference)\> to provide context for the document. In this DocumentReference, we made it a mandatory practice to include the `type` field where you can specify the kind of document (using [LOINC](https://www.hl7.org/fhir/valueset-doc-typecodes.html), if possible),`description` field to outline a very brief description of the document, and `context` field to provide the relevant dates. Besides these mandatory fields, we ask that you try to provide as much context to the file as possible, including the practitioner (`author` field in the DocumentReference) and narrative (`text`).

<Tip>
  Note that you **do not** need to enter any references to the patient or your organization, as
  those will be inferred on our end - anything you will enter in these fields will be overwritten.
</Tip>

2. Execute the endpoint and receive a presigned URL (later reffered to as `URL`) to use for the consecutive file upload.

3. Use the `URL` from with a form-based upload, mapping the URL attributes `URL.url` and `URL.fields` to the corresponding fields of the form. Append the file contents and upload the file. Once the file is uploaded, the process will complete, making this document available to other HIEs.

<Warning>Make sure to append all the `URL.fields` from the presigned URL to the form!</Warning>

## Query Params

<ParamField query="patientId" type="string" required>
  The ID of the Patient.
</ParamField>

## Body

    <ParamField body="type" type="CodeableConcept" required>
      A [CodeableConcept](/medical-api/fhir/data-types/codeableconcept) of the file type.
      <Expandable title="Type properties">
        <ParamField body="text" type="string" required>
          Plain text representation of the document kind.
        </ParamField>

        <ParamField body="coding" type="Coding[]">
          A [Coding](/medical-api/fhir/data-types/coding) property, which is a reference to a code defined by a terminology system.
        </ParamField>
      </Expandable>
    </ParamField>

    <ParamField body="description" type="string" required>
      A brief description of the file.
    </ParamField>

    <ParamField body="context" type="DocumentReferenceContext[]" required>
      Context of the document content.
      <Expandable title="Context properties">
        <ParamField body="period" type="Period" required>
          A time [Period](/medical-api/fhir/data-types/period) property defined by a start and end date and optionally time.
        </ParamField>

        <ParamField body="facilityType" type="CodeableConcept">
          Optional [CodeableConcept](/medical-api/fhir/data-types/codeableconcept) for the facilityType. We ask that you provide the name of the facility that generated the document under `text`.
            <Expandable title="Facility type properties">
          <ParamField body="type" type="CodeableConcept" required>
            A [CodeableConcept](/medical-api/fhir/data-types/codeableconcept) for the type and name of the facility.
              <ParamField body="text" type="string">
                Plain text with the facility name and type.
              </ParamField>

              <ParamField body="coding" type="Coding">
                A [Coding](/medical-api/fhir/data-types/coding) property, which is a reference to a code defined by a terminology system.
              </ParamField>
          </ParamField>
            </Expandable>
        </ParamField>

      </Expandable>
    </ParamField>

## Response

A presigned URL that can be used to upload a medical document to our system.

```json
{
  "url": "file-upload-url-string",
  "fields": Record<string, string>
}
```

<ResponseExample>

```javascript Metriport SDK
import { MetriportMedicalApi } from "@metriport/api-sdk";

const metriportClient = new MetriportMedicalApi("YOUR_API_KEY");
const docRefDraft: Partial<DocumentReference> = {
  description: "Third degree wrist burn treatment",
  type: {
    text: "Burn management Hospital Progress note",
    coding: [
      {
        code: "100556-0",
        system: "http://loinc.org",
      },
    ],
  },
  context: {
    period: {
      start: "2023-10-10T14:14:17Z",
    },
    facilityType: {
      text: "My Clinic Name - Acute Care",
    },
  },
};

const presignedUrl = await metriportClient.getDocumentUploadUrl("my-patient-id", docRef);
// Submit a form-data file upload request with:
// - form url: presignedUrl.url
// - form fields: presignedUrl.fields *
// - form file: the contents of the file being uploaded
```

</ResponseExample>
